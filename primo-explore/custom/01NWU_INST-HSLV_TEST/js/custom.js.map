{"version":3,"sources":["node_modules/browser-pack/_prelude.js","primo-explore/custom/main.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","app","angular","constant","groups","remoteScript","boxTitle","illiadURL","apiURL","component","template","controller","$element","this","$postLink","$primoExploreMain","parent","$el","query","detach","prepend","vm","getSearchTerm","parentCtrl","term","bindings","ctrl","getIconLink","iconLink","value","name","url","img","mapping","queries","filters","map","part","split","join","query_mappings","any","title","creator","subject","isbn","issn","lds13","terms","externalSearch","$onInit","setController","addExtSearch","getController","$scope","$location","searchTargets","facetGroup","targets","search","Object","prototype","toString","filter","factory","prmFacetCtrl","xx","checkExist","setInterval","facetService","results","limitCount","facetGroupCollapsed","values","undefined","clearInterval","angularLoad","showTabsAndScopes","config","$sceDelegateProvider","hathiTrustBaseUrl","urlWhitelist","resourceUrlWhitelist","push","svc","lookup","ids","hathiTrustLookupUrl","$http","jsonp","cache","jsonpCallbackParam","then","resp","data","$q","resolve","findRecord","bibData","recordId","keys","records","recordURL","catch","console","error","findFullViewRecord","fullTextUrl","result","j","items","item","fromRecord","hathiTrust","self","msg","hideOnline","isOnline","hideIfJournal","isJournal","ignoreCopyright","isAvailable","updateHathiTrustAvailability","prmSearchResultAvailabilityLine","pnx","addata","format","toLowerCase","indexOf","delivery","availability","GetIt1","some","g","links","l","isLinktoOnline","deliveryCategory","isOclcNum","match","hathiTrustIds","display","lds16","id","replace","res","link","entityId","illService","illiadOptions","whitelistGroups","illBox","jwtData","$root","$$childHead","$ctrl","userSessionManagerService","jwtUtilService","getDecodedToken","userGroup","user","log","getILLiadData","response","articles","Articles","requests","Requests","jtitle","author","count","expires","method","params","$timeout","$window","parentElement","doi","get","altmetric_endpoint","loadScript","Date","now","services","splice","scrollId","unbindWatcher","$watch","querySelector","newVal","oldVal","children","altContainer","appendChild","altm1","$onDestroy","_altmetric","_altmetric_embed_init"],"mappings":"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","file":"custom.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","(function(){\n\"use strict\";\n'use strict';\n\nvar app = angular.module('viewCustom', ['angularLoad', 'externalSearch', 'hathiTrustAvailability', 'myILL']);\n\n\"use strict\";\n'use strict';\n\n/************************************* BEGIN Customization Variables ************************************/\n\n//Here you can enter options to be passed to customization packages to configure them.\n\n//My ILL\n\napp.constant('illiadOptions', {\n  \"groups\": [\"nfaculty\", \"nstaff\", \"nundergrad\", \"ngraduate\", \"nlibstaff\", \"lfaculty\", \"lstaff\", \"lgraduate\", \"lundergrad\", \"NILR\", \"scsug\", \"scsgrad\", \"qfaculty\"],\n  \"remoteScript\": \"https://discoweb1-p.library.northwestern.edu/my-ill/illiad.php\",\n  \"boxTitle\": \"NUL Interlibrary Loan\",\n  \"illiadURL\": \"https://northwestern.illiad.oclc.org/illiad/Logon.html\",\n  \"apiURL\": \"https://northwestern.illiad.oclc.org/ILLiadWebPlatform/Transaction/UserRequests/\"\n\n});\n\n// End Customization Variables\n\n// Add top alert\n\napp.component('prmTopbarAfterAppStoreGenerated', {\n  template: /*html*/'\\n    <primo-explore-top-alert>      <md-toolbar>        <div class=\"bar alert-bar\" layout=\"row\" layout-align=\"left center\">          <span class=\"bar-text\"><prm-icon error-attention=\"\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"error-attention\"></prm-icon>           Coronavirus information for              <a href=\"https://www.feinberg.northwestern.edu/sites/covid-19/\" target=\"_blank\" class=\"primo-explore-top-alert-link\"><strong>Feinberg. </strong></a>\\n            </span>\\n        </div>\\n      </md-toolbar>\\n    </primo-explore-top-alert>',\n  controller: ['$element', function ($element) {\n    var ctrl = this;\n    ctrl.$postLink = function () {\n      var $primoExploreMain = $element.parent().parent().parent();\n      var $el = $element.query('primo-explore-top-alert').detach();\n      $primoExploreMain.prepend($el);\n    };\n  }]\n});\n\n// Enhance No Results tile\n\napp.controller('prmNoSearchResultAfterAppStoreGeneratedControllerAppStoreGenerated', [function () {\n  var vm = this;\n  vm.getSearchTerm = getSearchTerm;\n  function getSearchTerm() {\n    return vm.parentCtrl.term;\n  }\n}]);\n\napp.component('prmNoSearchResultAfterAppStoreGenerated', {\n  bindings: { parentCtrl: '<' },\n  controller: 'prmNoSearchResultAfterAppStoreGeneratedControllerAppStoreGenerated',\n  template: '<md-card class=\"default-card zero-margin _md md-primoExplore-theme\"><md-card-title><md-card-title-text><span translate=\"\" class=\"md-headline ng-scope\">No records found.</span></md-card-title-text></md-card-title><md-card-content><p><span>There are no results matching your search: <i>{{$ctrl.getSearchTerm()}}</i>. Looking for a book? Try again searching items held at other libraries:</span></p><md-button class=\"md-raised md-button md-primoExplore-theme md-ink-ripple\" href=\"http://www.worldcat.org/search?q={{$ctrl.getSearchTerm()}}\" type=\"button\" aria-label=\"Search WorldCat\" style=\"margin-left:0;margin-right:0;\"> <img src=\"custom/01NWU_INST-NULVNEW/img/worldcat-logo.png\" width=\"22\" height=\"22\" alt=\"worldcat-logo\" style=\"vertical-align:middle;\"> Search WorldCat</md-button><p><span>Looking for an article? Try <strong><a href=\"http://scholar.google.com/scholar?hl=en&q={{$ctrl.getSearchTerm()}}\">Google Scholar</a></strong></span>.</p><p><span translate=\"\" class=\"bold-text ng-scope\">Suggestions:</span></p><ul><li translate=\"\" class=\"ng-scope\">Make sure that all words are spelled correctly.</li><li translate=\"\" class=\"ng-scope\">Try a different search scope.</li><li translate=\"\" class=\"ng-scope\">Try different search terms.</li><li translate=\"\" class=\"ng-scope\">Try more general search terms.</li><li translate=\"\" class=\"ng-scope\">Try fewer search terms.</li></ul><p><strong><a href=\"https://galter.northwestern.edu/request-services-and-materials/ask-a-librarian\">Contact a Research Librarian for Assistance</a></strong>.</p></md-card-content></md-card>'\n});\n\n//End Enhance No Results tile\n\n//Logo with link\n\napp.controller('prmLogoAfterAppStoreGeneratedControllerAppStoreGenerated', [function () {\n  var ctrl = this;\n\n  ctrl.getIconLink = function () {\n    return ctrl.parentCtrl.iconLink;\n  };\n}]);\n\napp.component('prmLogoAfterAppStoreGenerated', {\n  bindings: {\n    parentCtrl: '<'\n  },\n  controller: 'prmLogoAfterAppStoreGeneratedControllerAppStoreGenerated',\n  template: ' \\n    <div class=\"product-logo product-logo-local\" layout=\"row\" layout-align=\"start center\" layout-fill id=\"banner\" tabindex=\"0\" role=\"banner\"><a href=\"https://www.feinberg.northwestern.edu/\"><img ng-src=\"{{$ctrl.getIconLink()}}\" alt=\"{{(\\'nui.header.LogoAlt\\' | translate)}}\"/></a>\\n    </div>\\n  '\n});\n\n//End add logo with link\n\n//Add NUPrint link to account\n\napp.component('prmMessagesAndBlocksOverviewAfterAppStoreGenerated', {\n  bindings: { parentCtrl: '<' },\n  template: '<div class=\"tiles-grid-tile\"><div class=\"tile-content layout-column\" layout=\"column\"><div class=\"tile-header layout-column\" layout=\"column\"><div class=\"layout-align-space-between-stretch layout-row\" layout=\"row\" layout-align=\"space-between\"><h2 class=\"header-link light-text\"><span>NUPrint</span></h2></div></div><md-button class=\"button-with-icon overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row\" type=\"button\" layout=\"row\" layout-align=\"center center\" aria-label=\"view nuprint account\" style=\"\" href=\"https://nuprint.northwestern.edu/\"><span>View Account</span></md-button></div></div>'\n});\n\n//End Add NUPrint\n\n// Add link to form to update chosen name in My Account\napp.component('prmAccountLinksAfterAppStoreGenerated', {\n  bindings: { parentCtrl: '<' },\n  template: '<a href=\"https://www.library.northwestern.edu/find-borrow-request/borrowing-materials/update-name.html\" target=\"_blank\" class=\"bold-text margin-left-small md-primoExplore-theme\"><span>Update Your Name</span><prm-icon external-link=\"\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon></a>'\n});\n\n// End add link to My Account\n\n\n\n\n\n\n\n// External Search\n\nangular.module('externalSearch', []).value('searchTargets', [{\n  \"name\": \"Galter Website\",\n  \"url\": \"https://galter.northwestern.edu/search/results?utf8=%E2%9C%93&engine=local&searchterm=\",\n  \"img\": \"custom/01NWU_INST-HSLV/img/galter-favicon.png\",\n  mapping: function mapping(queries, filters) {\n    try {\n      return queries.map(part => part.split(\",\")[2] || \"\").join(' ')\n    }\n    catch (e) {\n      return ''\n    }\n  }\n}, {\n  \"name\": \"PubMed\",\n  \"url\": \"https://turing.library.northwestern.edu/login?url=https://pubmed.ncbi.nlm.nih.gov/?otool=norwelib&term=\",\n  \"img\": \"custom/01NWU_INST-HSLV/img/logo-pubmed.png\",\n  mapping: function mapping(queries, filters) {\n    try {\n      return queries.map(part => part.split(\",\")[2] || \"\").join(' ')\n    }\n    catch (e) {\n      return ''\n    }\n  }\n}, {\n  \"name\": \"Google Scholar\",\n  \"url\": \"https://turing.library.northwestern.edu/login?url=https://scholar.google.com/scholar?q=\",\n  \"img\": \"custom/01NWU_INST-HSLV/img/logo-googlescholar.png\",\n  mapping: function mapping(queries, filters) {\n    try {\n      return queries.map(part => part.split(\",\")[2] || \"\").join(' ')\n    }\n    catch (e) {\n      return ''\n    }\n  }\n}, {\n  \"name\": \"WorldCat\",\n  \"url\": \"https://turing.library.northwestern.edu/login?url=http://www.worldcat.org/search?\",\n  \"img\": \"custom/01NWU_INST-HSLV/img/worldcat-logo.png\",\n  mapping: function (queries, filters) {\n    const query_mappings = {\n      'any': 'kw',\n      'title': 'ti',\n      'creator': 'au',\n      'subject': 'su',\n      'isbn': 'bn',\n      'issn': 'n2',\n      'lds13': 'ti'\n    }\n    try {\n      return 'q=' + queries.map(part => {\n        let terms = part.split(',')\n        let type = query_mappings[terms[0]] || 'kw'\n        let string = terms[2] || ''\n        let join = terms[3] || ''\n        return type + ':' + string + ' ' + join + ' '\n      }).join('')\n    }\n    catch (e) {\n      return ''\n    }\n  }\n}]).component('prmFacetAfterAppStoreGenerated', {\n  bindings: { parentCtrl: '<' },\n  controller: ['externalSearch', function (externalSearch) {\n    this.$onInit = function () {\n      externalSearch.setController(this.parentCtrl);\n      externalSearch.addExtSearch();\n    };\n  }]\n}).component('prmPageNavMenuAfterAppStoreGenerated', {\n  controller: ['externalSearch', function (externalSearch) {\n    this.$onInit = function () {\n      if (externalSearch.getController()) externalSearch.addExtSearch();\n    };\n  }]\n}).component('prmFacetExactAfterAppStoreGenerated', {\n  bindings: { parentCtrl: '<' },\n  template: '<div ng-if=\"name === \\'Search More\\'\">\\\r\n          <div ng-hide=\"$ctrl.parentCtrl.facetGroup.facetGroupCollapsed\">\\\r\n              <div class=\"section-content animate-max-height-variable\">\\\r\n                  <div class=\"md-chips md-chips-wrap\">\\\r\n                      <div ng-repeat=\"target in targets\" aria-live=\"polite\" class=\"md-chip animate-opacity-and-scale facet-element-marker-local4\">\\\r\n                          <div class=\"md-chip-content layout-row\" role=\"button\" tabindex=\"0\">\\\r\n                              <strong dir=\"auto\" title=\"{{ target.name }}\">\\\r\n                                  <a ng-href=\"{{ target.url + target.mapping(queries, filters) }}\" target=\"_blank\">\\\r\n                                      <img ng-src=\"{{ target.img }}\" width=\"22\" height=\"22\" alt=\"{{ target.alt }}\" style=\"vertical-align:middle;\"> {{ target.name }}\\\r\n                                  </a>\\\r\n                              </strong>\\\r\n                          </div>\\\r\n                      </div>\\\r\n                  </div>\\\r\n              </div>\\\r\n          </div>\\\r\n      </div>',\n  controller: ['$scope', '$location', 'searchTargets', function ($scope, $location, searchTargets) {\n    this.$onInit = function () {\n      $scope.name = this.parentCtrl.facetGroup.name;\n      $scope.targets = searchTargets;\n      var query = $location.search().query;\n      var filter = $location.search().pfilter;\n      $scope.queries = Object.prototype.toString.call(query) === '[object Array]' ? query : query ? [query] : false;\n      $scope.filters = Object.prototype.toString.call(filter) === '[object Array]' ? filter : filter ? [filter] : false;\n    };\n  }]\n}).factory('externalSearch', function () {\n  return {\n    getController: function getController() {\n      return this.prmFacetCtrl || false;\n    },\n    setController: function setController(controller) {\n      this.prmFacetCtrl = controller;\n    },\n    addExtSearch: function addExtSearch() {\n      var xx = this;\n      var checkExist = setInterval(function () {\n\n        if (xx.prmFacetCtrl.facetService.results[0] && xx.prmFacetCtrl.facetService.results[0].name != \"Search More\") {\n          if (xx.prmFacetCtrl.facetService.results.name !== 'Search More') {\n            xx.prmFacetCtrl.facetService.results.unshift({\n              name: 'Search More',\n              displayedType: 'exact',\n              limitCount: 0,\n              facetGroupCollapsed: false,\n              values: undefined\n            });\n          }\n          clearInterval(checkExist);\n        }\n      }, 100);\n    }\n  };\n});\n\n// End External Search\n\n//Always display scope dropdown for basic searches\n\napp.component('prmSearchBarAfterAppStoreGenerated', {\n  bindings: { parentCtrl: '<' },\n  controller: 'SearchBarAfterControllerAppStoreGenerated'\n});\n\napp.controller('SearchBarAfterControllerAppStoreGenerated', ['angularLoad', function (angularLoad) {\n  var vm = this;\n  vm.parentCtrl.showTabsAndScopes = true;\n}]);\n\n//End display scopes\n\n//Hathi Trust\n\napp.component('prmSearchResultAvailabilityLineAfterAppStoreGenerated', {\n  template: '<hathi-trust-availability hide-online=\"true\" entity-id=\"urn:mace:incommon:northwestern.edu\"></hathi-trust-availability>'\n});\n\nangular.module('hathiTrustAvailability', []).constant('hathiTrustBaseUrl', 'https://catalog.hathitrust.org/api/volumes/brief/json/').config(['$sceDelegateProvider', 'hathiTrustBaseUrl', function ($sceDelegateProvider, hathiTrustBaseUrl) {\n  var urlWhitelist = $sceDelegateProvider.resourceUrlWhitelist();\n  urlWhitelist.push(hathiTrustBaseUrl + '**');\n  $sceDelegateProvider.resourceUrlWhitelist(urlWhitelist);\n}]).factory('hathiTrust', ['$http', '$q', 'hathiTrustBaseUrl', function ($http, $q, hathiTrustBaseUrl) {\n  var svc = {};\n\n  var lookup = function lookup(ids) {\n    if (ids.length) {\n      var hathiTrustLookupUrl = hathiTrustBaseUrl + ids.join('|');\n      return $http.jsonp(hathiTrustLookupUrl, {\n        cache: true,\n        jsonpCallbackParam: 'callback'\n      }).then(function (resp) {\n        return resp.data;\n      });\n    } else {\n      return $q.resolve(null);\n    }\n  };\n\n  // find a HT record URL for a given list of identifiers (regardless of copyright status)\n  svc.findRecord = function (ids) {\n    return lookup(ids).then(function (bibData) {\n      for (var i = 0; i < ids.length; i++) {\n        var recordId = Object.keys(bibData[ids[i]].records)[0];\n        if (recordId) {\n          return $q.resolve(bibData[ids[i]].records[recordId].recordURL);\n        }\n      }\n      return $q.resolve(null);\n    }).catch(function (e) {\n      console.error(e);\n    });\n  };\n\n  // find a public-domain HT record URL for a given list of identifiers\n  svc.findFullViewRecord = function (ids) {\n    var handleResponse = function handleResponse(bibData) {\n      var fullTextUrl = null;\n      for (var i = 0; !fullTextUrl && i < ids.length; i++) {\n        var result = bibData[ids[i]];\n        for (var j = 0; j < result.items.length; j++) {\n          var item = result.items[j];\n          if (item.usRightsString.toLowerCase() === 'full view') {\n            fullTextUrl = result.records[item.fromRecord].recordURL;\n            break;\n          }\n        }\n      }\n      return $q.resolve(fullTextUrl);\n    };\n    return lookup(ids).then(handleResponse).catch(function (e) {\n      console.error(e);\n    });\n  };\n\n  return svc;\n}]).controller('hathiTrustAvailabilityControllerAppStoreGenerated', ['hathiTrust', function (hathiTrust) {\n  var self = this;\n\n  self.$onInit = function () {\n    if (!self.msg) self.msg = 'Full Text Available at HathiTrust';\n\n    // prevent appearance/request iff 'hide-online'\n    if (self.hideOnline && isOnline()) {\n      return;\n    }\n\n    // prevent appearance/request iff 'hide-if-journal'\n    if (self.hideIfJournal && isJournal()) {\n      return;\n    }\n\n    // prevent appearance/request if item is unavailable\n    if (self.ignoreCopyright && !isAvailable()) {\n      //allow links for locally unavailable items that are in the public domain\n      self.ignoreCopyright = false;\n    }\n\n    // look for full text at HathiTrust\n    updateHathiTrustAvailability();\n  };\n\n  var isJournal = function isJournal() {\n    var format = self.prmSearchResultAvailabilityLine.result.pnx.addata.format[0];\n    return !(format.toLowerCase().indexOf('journal') == -1); // format.includes(\"Journal\")\n  };\n\n  var isAvailable = function isAvailable() {\n    var available = self.prmSearchResultAvailabilityLine.result.delivery.availability[0];\n    return available.toLowerCase().indexOf('unavailable') == -1;\n  };\n\n  var isOnline = function isOnline() {\n    var delivery = self.prmSearchResultAvailabilityLine.result.delivery || [];\n    if (!delivery.GetIt1) return delivery.deliveryCategory.indexOf('Alma-E') !== -1;\n    return self.prmSearchResultAvailabilityLine.result.delivery.GetIt1.some(function (g) {\n      return g.links.some(function (l) {\n        return l.isLinktoOnline;\n      });\n    });\n  };\n\n  var formatLink = function formatLink(link) {\n    return self.entityId ? link + '?signon=swle:' + self.entityId : link;\n  };\n\n  var isOclcNum = function isOclcNum(value) {\n    return value.match(/^(\\(ocolc\\))?\\d+$/i);\n  };\n\n  var updateHathiTrustAvailability = function updateHathiTrustAvailability() {\n    var hathiTrustIds = (self.prmSearchResultAvailabilityLine.result.pnx.display.lds16 || []).filter(isOclcNum).map(function (id) {\n      return 'oclc:' + id.toLowerCase().replace('(ocolc)', '');\n    });\n    hathiTrust[self.ignoreCopyright ? 'findRecord' : 'findFullViewRecord'](hathiTrustIds).then(function (res) {\n      if (res) self.fullTextLink = formatLink(res);\n    });\n  };\n}]).component('hathiTrustAvailability', {\n  require: {\n    prmSearchResultAvailabilityLine: '^prmSearchResultAvailabilityLine'\n  },\n  bindings: {\n    entityId: '@',\n    ignoreCopyright: '<',\n    hideIfJournal: '<',\n    hideOnline: '<',\n    msg: '@?'\n  },\n  controller: 'hathiTrustAvailabilityControllerAppStoreGenerated',\n  template: '<span ng-if=\"$ctrl.fullTextLink\" class=\"umnHathiTrustLink\">\\\r\n                <md-icon alt=\"HathiTrust Logo\">\\\r\n                  <svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"100%\" height=\"100%\" viewBox=\"0 0 16 16\" enable-background=\"new 0 0 16 16\" xml:space=\"preserve\">  <image id=\"image0\" width=\"16\" height=\"16\" x=\"0\" y=\"0\"\\\r\n                  xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJN\\\r\n                  AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACNFBMVEXuegXvegTsewTveArw\\\r\n                  eQjuegftegfweQXsegXweQbtegnsegvxeQbvegbuegbvegbveQbtegfuegbvegXveQbvegbsfAzt\\\r\n                  plfnsmfpq1/wplPuegXvqFrrq1znr2Ptok/sewvueQfuegbtegbrgRfxyJPlsXDmlTznnk/rn03q\\\r\n                  pVnomkjnlkDnsGnvwobsfhPveQXteQrutHDqpF3qnUnpjS/prmDweQXsewjvrWHsjy7pnkvqqGDv\\\r\n                  t3PregvqhB3uuXjusmzpp13qlz3pfxTskC3uegjsjyvogBfpmkHpqF/us2rttXLrgRjrgBjttXDo\\\r\n                  gx/vtGznjzPtfhHqjCfuewfrjCnwfxLpjC7wtnDogBvssmjpfhLtegjtnEjrtnTmjC/utGrsew7s\\\r\n                  o0zpghnohB/roUrrfRHtsmnlkTbrvH3tnEXtegXvegTveQfqhyHvuXjrrGTpewrsrmXqfRHogRjt\\\r\n                  q2Dqewvqql/wu3vqhyDueQnwegXuegfweQPtegntnUvnt3fvxI7tfhTrfA/vzJvmtXLunEbtegrw\\\r\n                  egTregzskjbsxI/ouoPsqFzniyrz2K3vyZnokDLpewvtnkv30J/w17XsvYXjgBbohR7nplnso1L0\\\r\n                  1Kf40Z/um0LvegXngBnsy5juyJXvsGftrGTnhB/opVHoew7qhB7rzJnnmErkkz3splbqlT3smT3t\\\r\n                  tXPqqV7pjzHvunjrfQ7vewPsfA7uoU3uqlruoEzsfQ/vegf///9WgM4fAAAAFHRSTlOLi4uLi4uL\\\r\n                  i4uLi4uLi4tRUVFRUYI6/KEAAAABYktHRLvUtndMAAAAB3RJTUUH4AkNDgYNB5/9vwAAAQpJREFU\\\r\n                  GNNjYGBkYmZhZWNn5ODk4ubh5WMQERUTl5CUEpWWkZWTV1BUYlBWUVVT19BUUtbS1tHV0zdgMDQy\\\r\n                  NjE1MzRXsrC0sraxtWOwd3B0cnZxlXZz9/D08vbxZfDzDwgMCg4JdQsLj4iMio5hiI2LT0hMSk5J\\\r\n                  TUvPyMzKzmHIzcsvKCwqLiktK6+orKquYZCuratvaGxqbmlta+8QNRBl6JQ26Oru6e3rnzBx0uQ8\\\r\n                  aVGGvJopU6dNn1E8c9bsOXPniYoySM+PXbBw0eIlS5fl1C+PFRFlEBUVXbFy1eo1a9fliQDZYIHY\\\r\n                  9fEbNm7avEUUJiC6ddv2HTt3mSuBBfhBQEBQSEgYzOIHAHtfTe/vX0uvAAAAJXRFWHRkYXRlOmNy\\\r\n                  ZWF0ZQAyMDE2LTA5LTEzVDE0OjA2OjEzLTA1OjAwNMgVqAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAx\\\r\n                  Ni0wOS0xM1QxNDowNjoxMy0wNTowMEWVrRQAAAAASUVORK5CYII=\" />\\\r\n                  </svg> \\\r\n                </md-icon>\\\r\n                <a target=\"_blank\" ng-href=\"{{$ctrl.fullTextLink}}\">\\\r\n                {{ ::$ctrl.msg }}\\\r\n                  <prm-icon external-link=\"\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"open-in-new\"></prm-icon>\\\r\n                </a>\\\r\n              </span>'\n});\n\n//End Hathi Trust module\n\n//My-ill\n\nangular.module('myILL', []).component('prmLoansOverviewAfterAppStoreGenerated', {\n  bindings: { parentCtrl: '<' },\n  controller: function controller($scope, $element, $q, $http, illService, illiadOptions) {\n    var whitelistGroups = illiadOptions.groups;\n    $scope.illBox = false;\n    this.$onInit = function () {\n      /* from: https://github.com/mehmetc/primo-explore-dom/blob/master/js/primo/explore/helper.js */\n      var rootScope = $scope.$root;\n      var uSMS = rootScope.$$childHead.$ctrl.userSessionManagerService;\n      var jwtData = uSMS.jwtUtilService.getDecodedToken();\n      console.log(jwtData);\n      var userGroup = jwtData.userGroup;\n      var user = jwtData.user;\n      var check = whitelistGroups.indexOf(userGroup);\n      if (check >= 0) {\n        $scope.illBox = true;\n        //$scope.showGlobe = true;\n        $scope.boxTitle = illiadOptions.boxTitle;\n        $scope.illiadURL = illiadOptions.illiadURL;\n        console.log($scope.boxTitle);\n        var url = illiadOptions.remoteScript;\n        var response = illService.getILLiadData(url, user).then(function (response) {\n          console.log(response);\n          $scope.articles = response.data.Articles;\n          $scope.requests = response.data.Requests;\n          /*if ($scope.requests || $scope.articles) {\r\n            $scope.showGlobe = false;\r\n          }*/\n        });\n      }\n    };\n  },\n\n  template: '<div class=\"tiles-grid-tile\" ng-show={{illBox}}><div class=\"layout-column tile-content\" layout=\"column\"><div class=\"layout-column tile-header\" layout=\"column\"><div class=\"layout-align-space-between-stretch layout-row\" layout=\"row layout-align=space-between\"><h2 class=\"header-link light-text\" role=\"button\" tabindex=\"0\"><span>{{boxTitle}}</span></h2></div></div><div><p style=\"font-size: 18px;font-weight: 400; padding: 0 16px;\">Pending Requests:</p><illrequest ng-if=\"requests\" ng-repeat=\"y in requests\" item=\"y\"></illrequest><div ng-if=\"!requests\" style=\"text-align: center;\"><p style=\"padding: 0 16px;\">You have no requests.</p></div><div style=\"text-align:center;\"></div><p style=\"font-size: 18px; font-weight: 400; padding: 0 16px;\">My Articles:</p><illarticle ng-if=\"articles\" ng-repeat=\"x in articles\" item=\"x\"></illarticle><div ng-if=\"!articles\" style=\"text-align: center\"><p style=\"padding: 0 16px;\">You have no articles.</p></div><div style=\"text-align: center;\"></div></div><md-button class=\"button-with-icon overflow-visible md-button md-primoExplore-theme md-ink-ripple layout-align-center-center layout-row\" type=\"button\" layout=\"row\" layout-align=\"center center\" aria-label=\"view interlibrary loans checked out\" style=\"\" href=\"{{illiadURL}}\"><span>Sign in to your ILL account</span><prm-icon aria-label=\"arrow right\" class=\"arrow-icon\" icon-type=\"svg\" svg-icon-set=\"primo-ui\" icon-definition=\"chevron-right\"><md-icon md-svg-icon=\"primo-ui:chevron-right\" aria-label=\"arrow right\" class=\"md-primoExplore-theme\" aria-hidden=\"true\"></md-icon></prm-icon></md-button></div></div>'\n}).component('illarticle', {\n  bindings: { item: '<' },\n  controller: function controller($scope) {\n    console.log(this.item);\n    //console.log(this.item.index);\n    $scope.url = this.item.url;\n    $scope.title = this.item.title;\n    $scope.item = this.item;\n    $scope.jtitle = this.item.jtitle;\n    $scope.author = this.item.author;\n    $scope.count = this.item.count;\n    $scope.expires = this.item.expires;\n  },\n  template: '<md-list class=\"layout-column md-primoExplore-theme my-ill\" layout=\"column\" role=\"list\" style=\"color:#4E2A84;\"><md-list-item class=\"md-3-line\" role=\"listitem\" tabindex=\"-1\"><div class=\"_md-list-item-inner\"><div class=\"md-list-item-text\"><h3><a href=\"{{url}}\" target=\"_blank\">{{title}}</a></h3><h4>{{author}}</h4><h4>Expires {{expires}}.</h4></div></div></md-list-item></md-list>'\n}).component('illrequest', {\n  bindings: { item: '<' },\n  controller: function controller($scope) {\n    $scope.title = this.item.title;\n    $scope.author = this.item.author;\n    $scope.count = this.item.count;\n  },\n\n  //template:\"<p>{{count}}) {{title}}/ {{author}}. </p>\"\n  template: '<md-list class=\"layout-column md-primoExplore-theme my-ill\" layout=\"column\" role=\"list\" style=\"color:#4E2A84;\"><md-list-item class=\"md-2-line\" role=\"listitem\" tabindex=\"-1\"><div class=\"_md-list-item-inner\"><div class=\"md-list-item-text\"><h3>{{title}}</h3><h4>{{author}}</h4></div></div></md-list-item></md-list>'\n}).factory('illService', ['$http', function ($http) {\n  return {\n    getILLiadData: function getILLiadData(url, user) {\n      return $http({\n        method: 'GET',\n        url: url,\n        params: { 'user': user },\n        cache: true\n      });\n    }\n  };\n}]);\n\n//End My-ill\n\n// Altmetric plugin\n\napp.controller('FullViewAfterController', ['angularLoad', '$http', '$scope', '$element', '$timeout', '$window', function (angularLoad, $http, $scope, $element, $timeout, $window) {\n  var altmetric_endpoint = 'https://api.altmetric.com/v1';\n  var altmetric_widget = 'https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js?';\n  var vm = this;\n  this.$http = $http;\n  this.$element = $element;\n  this.$scope = $scope;\n  this.$window = $window;\n  vm.$onInit = function () //wait for all the bindings to be initialised\n  {\n    vm.parentElement = this.$element.parent()[0]; //the prm-full-view container\n    try {\n        vm.doi = vm.parentCtrl.item.pnx.addata.doi[0] || '';\n    } catch (e) {\n      return;\n    }\n\n    if (vm.doi) {\n      //If we've got a doi to work with check whether altmetrics has data for it.\n      //If so, make our div visible and create a new Altmetrics service\n      $timeout(function () {\n        $http.get(altmetric_endpoint + '/doi/' + vm.doi).then(function () {\n          try {\n            //Get the altmetrics widget\n            angularLoad.loadScript(altmetric_widget + Date.now()).then(function () {});\n            //Create our new Primo service\n            var altmetricsSection = {\n              scrollId: \"altmetrics\",\n              serviceName: \"altmetrics\",\n              title: \"brief.results.tabs.Altmetrics\"\n            };\n            vm.parentCtrl.services.splice(vm.parentCtrl.services.length, 0, altmetricsSection);\n          } catch (e) {\n            console.log(e);\n          }\n        }).catch(function (e) {\n          return;\n        });\n      }, 3000);\n    }\n\n\n    //move the altmetrics widget into the new Altmetrics service section\n    var unbindWatcher = this.$scope.$watch(function () {\n      return vm.parentElement.querySelector('h4[translate=\"brief.results.tabs.Altmetrics\"]');\n    }, function (newVal, oldVal) {\n      if (newVal) {\n        //Get the section body associated with the value we're watching\n        let altContainer = newVal.parentElement.parentElement.parentElement.parentElement.children[1];\n        let almt1 = vm.parentElement.children[1].children[0];\n        if (altContainer && altContainer.appendChild && altm1) {\n            altContainer.appendChild(altm1);\n        }\n        unbindWatcher();\n      }\n    });\n  }; // end of $onInit\n\n  //You'd also need to look at removing the various css/js scripts loaded by this.\n  //refer to: https://github.com/Det-Kongelige-Bibliotek/primo-explore-rex\n  vm.$onDestroy = function ()\n  {\n    if (this.$window._altmetric) {\n        delete this.$window._altmetric;\n    }\n\n    if (this.$window._altmetric_embed_init) {\n        delete this.$window._altmetric_embed_init;\n    }\n\n    if (this.$window.AltmetricTemplates) {\n        delete this.$window.AltmetricTemplates;\n    }\n  }\n}]); // end FullViewAfterController\n\napp.component('prmFullViewAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'FullViewAfterController',\n  template: '<div id=\"altm1\" ng-if=\"$ctrl.doi\" class=\"altmetric-embed\" data-hide-no-mentions=\"true\" data-link-target=\"new\" data-badge-type=\"medium-donut\" data-badge-details=\"right\" data-doi=\"{{$ctrl.doi}}\"></div>'\n\n});\n\n\n// End Altmetric plugin\n\n// Add the chat button\n//\n// (function () {\n//   var lc = document.createElement('script');lc.type = 'text/javascript';lc.async = 'true';\n//   lc.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'northwestern.libanswers.com/load_chat.php?hash=8479f851eb63bff929998c6128b41b20';\n//   var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(lc, s);\n//\n//   // End the chat button\n// })();\n\n//Auto generated code by primo app store DO NOT DELETE!!! -START-\n/*\n    hookName is a place holder with should hold the hook name not including \"prm\" at the beginning and in upper camel case\n    e.g: for hook prmSearchBarAfter (in html prm-search-bar-after) it should be given \"SearchBarAfter\"\n */\napp.controller('AccountLinksAfterController', [function () {\n  var vm = this;\n}]);\n\napp.component('prmAccountLinksAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'AccountLinksAfterController',\n  template: '\\n    <prm-account-links-after-app-store-generated parent-ctrl=\"$ctrl.parentCtrl\"></prm-account-links-after-app-store-generated>\\n'\n\n});\n\n//Auto generated code by primo app store DO NOT DELETE!!! -END-\n\n//Auto generated code by primo app store DO NOT DELETE!!! -START-\n/*\n    hookName is a place holder with should hold the hook name not including \"prm\" at the beginning and in upper camel case\n    e.g: for hook prmSearchBarAfter (in html prm-search-bar-after) it should be given \"SearchBarAfter\"\n */\napp.controller('FacetAfterController', [function () {\n  var vm = this;\n}]);\n\napp.component('prmFacetAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'FacetAfterController',\n  template: '\\n    <prm-facet-after-app-store-generated parent-ctrl=\"$ctrl.parentCtrl\"></prm-facet-after-app-store-generated>\\n'\n\n});\n\n//Auto generated code by primo app store DO NOT DELETE!!! -END-\n\n//Auto generated code by primo app store DO NOT DELETE!!! -START-\n/*\n    hookName is a place holder with should hold the hook name not including \"prm\" at the beginning and in upper camel case\n    e.g: for hook prmSearchBarAfter (in html prm-search-bar-after) it should be given \"SearchBarAfter\"\n */\napp.controller('FacetExactAfterController', [function () {\n  var vm = this;\n}]);\n\napp.component('prmFacetExactAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'FacetExactAfterController',\n  template: '\\n    <prm-facet-exact-after-app-store-generated parent-ctrl=\"$ctrl.parentCtrl\"></prm-facet-exact-after-app-store-generated>\\n'\n\n});\n\n//Auto generated code by primo app store DO NOT DELETE!!! -END-\n\n//Auto generated code by primo app store DO NOT DELETE!!! -START-\n/*\n    hookName is a place holder with should hold the hook name not including \"prm\" at the beginning and in upper camel case\n    e.g: for hook prmSearchBarAfter (in html prm-search-bar-after) it should be given \"SearchBarAfter\"\n */\napp.controller('LoansOverviewAfterController', [function () {\n  var vm = this;\n}]);\n\napp.component('prmLoansOverviewAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'LoansOverviewAfterController',\n  template: '\\n    <prm-loans-overview-after-app-store-generated parent-ctrl=\"$ctrl.parentCtrl\"></prm-loans-overview-after-app-store-generated>\\n'\n\n});\n\n//Auto generated code by primo app store DO NOT DELETE!!! -END-\n\n//Auto generated code by primo app store DO NOT DELETE!!! -START-\n/*\n    hookName is a place holder with should hold the hook name not including \"prm\" at the beginning and in upper camel case\n    e.g: for hook prmSearchBarAfter (in html prm-search-bar-after) it should be given \"SearchBarAfter\"\n */\napp.controller('LogoAfterController', [function () {\n  var vm = this;\n}]);\n\napp.component('prmLogoAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'LogoAfterController',\n  template: '\\n    <prm-logo-after-app-store-generated parent-ctrl=\"$ctrl.parentCtrl\"></prm-logo-after-app-store-generated>\\n'\n\n});\n\n//Auto generated code by primo app store DO NOT DELETE!!! -END-\n\n//Auto generated code by primo app store DO NOT DELETE!!! -START-\n/*\n    hookName is a place holder with should hold the hook name not including \"prm\" at the beginning and in upper camel case\n    e.g: for hook prmSearchBarAfter (in html prm-search-bar-after) it should be given \"SearchBarAfter\"\n */\napp.controller('MessagesAndBlocksOverviewAfterController', [function () {\n  var vm = this;\n}]);\n\napp.component('prmMessagesAndBlocksOverviewAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'MessagesAndBlocksOverviewAfterController',\n  template: '\\n    <prm-messages-and-blocks-overview-after-app-store-generated parent-ctrl=\"$ctrl.parentCtrl\"></prm-messages-and-blocks-overview-after-app-store-generated>\\n'\n\n});\n\n//Auto generated code by primo app store DO NOT DELETE!!! -END-\n\n//Auto generated code by primo app store DO NOT DELETE!!! -START-\n/*\n    hookName is a place holder with should hold the hook name not including \"prm\" at the beginning and in upper camel case\n    e.g: for hook prmSearchBarAfter (in html prm-search-bar-after) it should be given \"SearchBarAfter\"\n */\napp.controller('NoSearchResultAfterController', [function () {\n  var vm = this;\n}]);\n\napp.component('prmNoSearchResultAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'NoSearchResultAfterController',\n  template: '\\n    <prm-no-search-result-after-app-store-generated parent-ctrl=\"$ctrl.parentCtrl\"></prm-no-search-result-after-app-store-generated>\\n'\n\n});\n\n//Auto generated code by primo app store DO NOT DELETE!!! -END-\n\n//Auto generated code by primo app store DO NOT DELETE!!! -START-\n/*\n    hookName is a place holder with should hold the hook name not including \"prm\" at the beginning and in upper camel case\n    e.g: for hook prmSearchBarAfter (in html prm-search-bar-after) it should be given \"SearchBarAfter\"\n */\napp.controller('PageNavMenuAfterController', [function () {\n  var vm = this;\n}]);\n\napp.component('prmPageNavMenuAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'PageNavMenuAfterController',\n  template: '\\n    <prm-page-nav-menu-after-app-store-generated parent-ctrl=\"$ctrl.parentCtrl\"></prm-page-nav-menu-after-app-store-generated>\\n'\n\n});\n\n//Auto generated code by primo app store DO NOT DELETE!!! -END-\n\n//Auto generated code by primo app store DO NOT DELETE!!! -START-\n/*\n    hookName is a place holder with should hold the hook name not including \"prm\" at the beginning and in upper camel case\n    e.g: for hook prmSearchBarAfter (in html prm-search-bar-after) it should be given \"SearchBarAfter\"\n */\napp.controller('SearchBarAfterController', [function () {\n  var vm = this;\n}]);\n\napp.component('prmSearchBarAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'SearchBarAfterController',\n  template: '\\n    <prm-search-bar-after-app-store-generated parent-ctrl=\"$ctrl.parentCtrl\"></prm-search-bar-after-app-store-generated>\\n'\n\n});\n\n//Auto generated code by primo app store DO NOT DELETE!!! -END-\n\n//Auto generated code by primo app store DO NOT DELETE!!! -START-\n/*\n    hookName is a place holder with should hold the hook name not including \"prm\" at the beginning and in upper camel case\n    e.g: for hook prmSearchBarAfter (in html prm-search-bar-after) it should be given \"SearchBarAfter\"\n */\napp.controller('SearchResultAvailabilityLineAfterController', [function () {\n  var vm = this;\n}]);\n\napp.component('prmSearchResultAvailabilityLineAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'SearchResultAvailabilityLineAfterController',\n  template: '\\n    <prm-search-result-availability-line-after-app-store-generated parent-ctrl=\"$ctrl.parentCtrl\"></prm-search-result-availability-line-after-app-store-generated>\\n'\n\n});\n\n//Auto generated code by primo app store DO NOT DELETE!!! -END-\n\n//Auto generated code by primo app store DO NOT DELETE!!! -START-\n/*\n    hookName is a place holder with should hold the hook name not including \"prm\" at the beginning and in upper camel case\n    e.g: for hook prmSearchBarAfter (in html prm-search-bar-after) it should be given \"SearchBarAfter\"\n */\napp.controller('TopbarAfterController', [function () {\n  var vm = this;\n}]);\n\napp.component('prmTopbarAfter', {\n  bindings: { parentCtrl: '<' },\n  controller: 'TopbarAfterController',\n  template: '\\n <div id=\"TopbarAfterSiteTitle\"><a href=\"https://galter.northwestern.edu\">Galter Health Sciences Library & Learning Center</a></div>\\n    <prm-topbar-after-app-store-generated parent-ctrl=\"$ctrl.parentCtrl\"></prm-topbar-after-app-store-generated>\\n'\n\n});\n\n//Auto generated code by primo app store DO NOT DELETE!!! -END-\n})();\n"]}